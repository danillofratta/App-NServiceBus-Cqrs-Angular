2025-02-22 15:16:18.008 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 15:16:18.136 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 15:16:18.142 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 15:16:19.349 INFO  Immediate Retry is going to retry message 'ae70ef25-7207-4a86-98e4-b28b013a073b' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:16:18:968169 Z
	Handler failure time: 2025-02-22 18:16:19:048241 Z
	Handler canceled: False
	Message ID: ae70ef25-7207-4a86-98e4-b28b013a073b
	Pipeline canceled: False
2025-02-22 15:16:19.414 INFO  Immediate Retry is going to retry message '88327f32-24ff-4e54-9124-b28b0139e5ff' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:16:19:387103 Z
	Handler failure time: 2025-02-22 18:16:19:410381 Z
	Handler canceled: False
	Message ID: 88327f32-24ff-4e54-9124-b28b0139e5ff
	Pipeline canceled: False
2025-02-22 15:16:19.433 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:16:19.437 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:16:19.868 INFO  Immediate Retry is going to retry message 'ae70ef25-7207-4a86-98e4-b28b013a073b' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\e1f9a1fe-784f-cd44-6849-5f01ad6e6e89.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\e1f9a1fe-784f-cd44-6849-5f01ad6e6e89.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: ae70ef25-7207-4a86-98e4-b28b013a073b
	Pipeline canceled: False
2025-02-22 15:16:19.894 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:16:19.904 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:16:22.491 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:16:22.502 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:16:22.513 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:16:22.519 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:16:54.448 INFO  Immediate Retry is going to retry message '3a1231ca-ea2d-427f-a5ca-b28c012d4638' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:16:54:375693 Z
	Handler failure time: 2025-02-22 18:16:54:445537 Z
	Handler canceled: False
	Message ID: 3a1231ca-ea2d-427f-a5ca-b28c012d4638
	Pipeline canceled: False
2025-02-22 15:16:54.590 INFO  Immediate Retry is going to retry message '0143653c-c621-4ce5-93eb-b28c012d4638' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:16:54:561022 Z
	Handler failure time: 2025-02-22 18:16:54:587535 Z
	Handler canceled: False
	Message ID: 0143653c-c621-4ce5-93eb-b28c012d4638
	Pipeline canceled: False
2025-02-22 15:16:54.657 INFO  Immediate Retry is going to retry message 'dae55fa2-500e-430f-b7c2-b28c012d4644' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:16:54:627299 Z
	Handler failure time: 2025-02-22 18:16:54:652309 Z
	Handler canceled: False
	Message ID: dae55fa2-500e-430f-b7c2-b28c012d4644
	Pipeline canceled: False
2025-02-22 15:17:15.210 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:17:16.869 INFO  Immediate Retry is going to retry message '3a1231ca-ea2d-427f-a5ca-b28c012d4638' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:17:16:808558 Z
	Handler failure time: 2025-02-22 18:17:16:847541 Z
	Handler canceled: False
	Message ID: 3a1231ca-ea2d-427f-a5ca-b28c012d4638
	Pipeline canceled: False
2025-02-22 15:17:17.105 INFO  Immediate Retry is going to retry message 'dae55fa2-500e-430f-b7c2-b28c012d4644' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:17:16:850256 Z
	Handler failure time: 2025-02-22 18:17:16:917533 Z
	Handler canceled: False
	Message ID: dae55fa2-500e-430f-b7c2-b28c012d4644
	Pipeline canceled: False
2025-02-22 15:17:17.538 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:17:17.557 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:17:17.563 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:17:17.568 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 15:17:17.573 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:17:17.763 INFO  Immediate Retry is going to retry message '0143653c-c621-4ce5-93eb-b28c012d4638' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c2a4a655-5a96-8fcc-82f9-54447d86e18d.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c2a4a655-5a96-8fcc-82f9-54447d86e18d.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 0143653c-c621-4ce5-93eb-b28c012d4638
	Pipeline canceled: False
2025-02-22 15:17:17.781 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:17:17.785 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:17:17.984 INFO  Immediate Retry is going to retry message '3a1231ca-ea2d-427f-a5ca-b28c012d4638' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c2a4a655-5a96-8fcc-82f9-54447d86e18d.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c2a4a655-5a96-8fcc-82f9-54447d86e18d.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 3a1231ca-ea2d-427f-a5ca-b28c012d4638
	Pipeline canceled: False
2025-02-22 15:17:17.995 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:17:17.998 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:20:45.142 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 15:20:45.261 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 15:20:45.266 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 15:20:59.951 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:20:59:818563 Z
	Handler failure time: 2025-02-22 18:20:59:870875 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:20:59.951 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:20:59:903243 Z
	Handler failure time: 2025-02-22 18:20:59:935829 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:20:59.951 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:20:59:771709 Z
	Handler failure time: 2025-02-22 18:20:59:815146 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:00.778 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:00:727116 Z
	Handler failure time: 2025-02-22 18:21:00:749728 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:00.778 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:00:751255 Z
	Handler failure time: 2025-02-22 18:21:00:775377 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:00.817 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:00:786567 Z
	Handler failure time: 2025-02-22 18:21:00:813595 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:00.855 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:00:828409 Z
	Handler failure time: 2025-02-22 18:21:00:853346 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:00.888 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:00:861862 Z
	Handler failure time: 2025-02-22 18:21:00:886428 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:00.927 WARN  Delayed Retry will reschedule message '891cb1cc-4992-47fb-8cae-b28c012e65c5' after a delay of 00:00:10 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:00:896534 Z
	Handler failure time: 2025-02-22 18:21:00:923192 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:00.997 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:00:969197 Z
	Handler failure time: 2025-02-22 18:21:00:995668 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:01.032 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:01:004299 Z
	Handler failure time: 2025-02-22 18:21:01:029744 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:11.702 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:11:625316 Z
	Handler failure time: 2025-02-22 18:21:11:665388 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:11.705 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:11:667617 Z
	Handler failure time: 2025-02-22 18:21:11:702902 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:11.762 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:11:717691 Z
	Handler failure time: 2025-02-22 18:21:11:758459 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:11.810 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:11:773261 Z
	Handler failure time: 2025-02-22 18:21:11:807809 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:11.848 WARN  Delayed Retry will reschedule message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' after a delay of 00:00:10 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:11:820931 Z
	Handler failure time: 2025-02-22 18:21:11:845899 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:11.896 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:11:855481 Z
	Handler failure time: 2025-02-22 18:21:11:894389 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:11.970 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:11:927985 Z
	Handler failure time: 2025-02-22 18:21:11:968190 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:12.018 WARN  Delayed Retry will reschedule message '18f47cea-8924-45d7-84f2-b28c012e65c5' after a delay of 00:00:10 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:11:981357 Z
	Handler failure time: 2025-02-22 18:21:12:016607 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:12.103 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:12:076611 Z
	Handler failure time: 2025-02-22 18:21:12:101727 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:12.161 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:12:140699 Z
	Handler failure time: 2025-02-22 18:21:12:159622 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:12.218 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:12:168128 Z
	Handler failure time: 2025-02-22 18:21:12:216536 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:12.281 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:12:225506 Z
	Handler failure time: 2025-02-22 18:21:12:280051 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:12.321 WARN  Delayed Retry will reschedule message '891cb1cc-4992-47fb-8cae-b28c012e65c5' after a delay of 00:00:20 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:12:290437 Z
	Handler failure time: 2025-02-22 18:21:12:319810 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:13.527 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:21:13.527 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:21:21.953 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:21:913048 Z
	Handler failure time: 2025-02-22 18:21:21:950795 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:21.993 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:21:961885 Z
	Handler failure time: 2025-02-22 18:21:21:991515 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.034 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:005572 Z
	Handler failure time: 2025-02-22 18:21:22:032033 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.078 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:044133 Z
	Handler failure time: 2025-02-22 18:21:22:075426 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.112 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:088647 Z
	Handler failure time: 2025-02-22 18:21:22:110560 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.153 WARN  Delayed Retry will reschedule message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' after a delay of 00:00:20 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:122409 Z
	Handler failure time: 2025-02-22 18:21:22:149807 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.220 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:188355 Z
	Handler failure time: 2025-02-22 18:21:22:217818 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.257 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:228807 Z
	Handler failure time: 2025-02-22 18:21:22:255246 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.301 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:271030 Z
	Handler failure time: 2025-02-22 18:21:22:298381 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.342 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:309739 Z
	Handler failure time: 2025-02-22 18:21:22:339864 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.385 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:351545 Z
	Handler failure time: 2025-02-22 18:21:22:382266 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:22.424 WARN  Delayed Retry will reschedule message '18f47cea-8924-45d7-84f2-b28c012e65c5' after a delay of 00:00:20 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:22:393004 Z
	Handler failure time: 2025-02-22 18:21:22:422582 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:32.399 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:32:375718 Z
	Handler failure time: 2025-02-22 18:21:32:397298 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:32.428 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:32:406099 Z
	Handler failure time: 2025-02-22 18:21:32:425528 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:32.464 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:32:435694 Z
	Handler failure time: 2025-02-22 18:21:32:462395 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:32.497 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:32:472452 Z
	Handler failure time: 2025-02-22 18:21:32:495478 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:32.535 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:32:510141 Z
	Handler failure time: 2025-02-22 18:21:32:533550 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:32.570 WARN  Delayed Retry will reschedule message '891cb1cc-4992-47fb-8cae-b28c012e65c5' after a delay of 00:00:30 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:32:543759 Z
	Handler failure time: 2025-02-22 18:21:32:568689 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.227 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:186763 Z
	Handler failure time: 2025-02-22 18:21:42:223596 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.269 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:238768 Z
	Handler failure time: 2025-02-22 18:21:42:267904 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.303 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:277964 Z
	Handler failure time: 2025-02-22 18:21:42:301737 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.342 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:313017 Z
	Handler failure time: 2025-02-22 18:21:42:339781 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.382 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:351133 Z
	Handler failure time: 2025-02-22 18:21:42:380152 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.423 WARN  Delayed Retry will reschedule message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' after a delay of 00:00:30 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:391026 Z
	Handler failure time: 2025-02-22 18:21:42:421175 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.487 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:460233 Z
	Handler failure time: 2025-02-22 18:21:42:484909 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.533 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:496230 Z
	Handler failure time: 2025-02-22 18:21:42:530498 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.573 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:544063 Z
	Handler failure time: 2025-02-22 18:21:42:570438 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.620 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:583217 Z
	Handler failure time: 2025-02-22 18:21:42:617944 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.660 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:629424 Z
	Handler failure time: 2025-02-22 18:21:42:657854 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:21:42.701 WARN  Delayed Retry will reschedule message '18f47cea-8924-45d7-84f2-b28c012e65c5' after a delay of 00:00:30 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:21:42:670595 Z
	Handler failure time: 2025-02-22 18:21:42:699916 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:02.676 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:02:651080 Z
	Handler failure time: 2025-02-22 18:22:02:674886 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:02.701 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:02:682390 Z
	Handler failure time: 2025-02-22 18:22:02:700080 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:02.726 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:02:707194 Z
	Handler failure time: 2025-02-22 18:22:02:724835 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:02.751 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:02:733484 Z
	Handler failure time: 2025-02-22 18:22:02:750413 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:02.782 INFO  Immediate Retry is going to retry message '891cb1cc-4992-47fb-8cae-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:02:758137 Z
	Handler failure time: 2025-02-22 18:22:02:781241 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:02.815 ERROR Moving message '891cb1cc-4992-47fb-8cae-b28c012e65c5' to the error queue 'error' because processing failed due to an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:02:791335 Z
	Handler failure time: 2025-02-22 18:22:02:813681 Z
	Handler canceled: False
	Message ID: 891cb1cc-4992-47fb-8cae-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.506 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:481378 Z
	Handler failure time: 2025-02-22 18:22:12:504260 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.538 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:513029 Z
	Handler failure time: 2025-02-22 18:22:12:536254 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.568 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:547868 Z
	Handler failure time: 2025-02-22 18:22:12:566698 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.599 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:573648 Z
	Handler failure time: 2025-02-22 18:22:12:597386 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.628 INFO  Immediate Retry is going to retry message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:605314 Z
	Handler failure time: 2025-02-22 18:22:12:627159 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.654 ERROR Moving message 'ccd254df-bc7b-437b-bb66-b28c012e65c5' to the error queue 'error' because processing failed due to an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:634930 Z
	Handler failure time: 2025-02-22 18:22:12:652588 Z
	Handler canceled: False
	Message ID: ccd254df-bc7b-437b-bb66-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.787 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:762402 Z
	Handler failure time: 2025-02-22 18:22:12:785098 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.827 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:796065 Z
	Handler failure time: 2025-02-22 18:22:12:825641 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.861 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:835375 Z
	Handler failure time: 2025-02-22 18:22:12:859268 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.898 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:868345 Z
	Handler failure time: 2025-02-22 18:22:12:896064 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.934 INFO  Immediate Retry is going to retry message '18f47cea-8924-45d7-84f2-b28c012e65c5' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:905247 Z
	Handler failure time: 2025-02-22 18:22:12:932788 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:12.971 ERROR Moving message '18f47cea-8924-45d7-84f2-b28c012e65c5' to the error queue 'error' because processing failed due to an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:12:941328 Z
	Handler failure time: 2025-02-22 18:22:12:969917 Z
	Handler canceled: False
	Message ID: 18f47cea-8924-45d7-84f2-b28c012e65c5
	Pipeline canceled: False
2025-02-22 15:22:15.236 INFO  Immediate Retry is going to retry message '12436066-b467-411a-86b7-b28c012ebe2e' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:15:194137 Z
	Handler failure time: 2025-02-22 18:22:15:233987 Z
	Handler canceled: False
	Message ID: 12436066-b467-411a-86b7-b28c012ebe2e
	Pipeline canceled: False
2025-02-22 15:22:39.030 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:22:41.376 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:22:41.412 INFO  Immediate Retry is going to retry message '5da9b342-038c-4131-b72f-b28c012ebe33' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:30:111606 Z
	Handler failure time: 2025-02-22 18:22:30:256543 Z
	Handler canceled: False
	Message ID: 5da9b342-038c-4131-b72f-b28c012ebe33
	Pipeline canceled: False
2025-02-22 15:22:41.413 INFO  Immediate Retry is going to retry message '12436066-b467-411a-86b7-b28c012ebe2e' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:39:181209 Z
	Handler failure time: 2025-02-22 18:22:41:409813 Z
	Handler canceled: False
	Message ID: 12436066-b467-411a-86b7-b28c012ebe2e
	Pipeline canceled: False
2025-02-22 15:22:41.413 INFO  Immediate Retry is going to retry message '35698ce7-aba8-46f8-add7-b28c012ebe2f' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\273e8db9-b436-c3c1-a254-2794e9b660af.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 68
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken)
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 35698ce7-aba8-46f8-add7-b28c012ebe2f
	Pipeline canceled: False
2025-02-22 15:22:46.488 INFO  Immediate Retry is going to retry message '5da9b342-038c-4131-b72f-b28c012ebe33' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:41:423650 Z
	Handler failure time: 2025-02-22 18:22:46:470096 Z
	Handler canceled: False
	Message ID: 5da9b342-038c-4131-b72f-b28c012ebe33
	Pipeline canceled: False
2025-02-22 15:22:46.541 INFO  Immediate Retry is going to retry message '12436066-b467-411a-86b7-b28c012ebe2e' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:46:472588 Z
	Handler failure time: 2025-02-22 18:22:46:522506 Z
	Handler canceled: False
	Message ID: 12436066-b467-411a-86b7-b28c012ebe2e
	Pipeline canceled: False
2025-02-22 15:22:46.583 INFO  Immediate Retry is going to retry message '5da9b342-038c-4131-b72f-b28c012ebe33' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:46:534542 Z
	Handler failure time: 2025-02-22 18:22:46:572607 Z
	Handler canceled: False
	Message ID: 5da9b342-038c-4131-b72f-b28c012ebe33
	Pipeline canceled: False
2025-02-22 15:22:47.622 INFO  Immediate Retry is going to retry message '12436066-b467-411a-86b7-b28c012ebe2e' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:46:581886 Z
	Handler failure time: 2025-02-22 18:22:47:618188 Z
	Handler canceled: False
	Message ID: 12436066-b467-411a-86b7-b28c012ebe2e
	Pipeline canceled: False
2025-02-22 15:22:47.650 INFO  Immediate Retry is going to retry message '5da9b342-038c-4131-b72f-b28c012ebe33' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:47:623372 Z
	Handler failure time: 2025-02-22 18:22:47:645407 Z
	Handler canceled: False
	Message ID: 5da9b342-038c-4131-b72f-b28c012ebe33
	Pipeline canceled: False
2025-02-22 15:22:47.701 INFO  Immediate Retry is going to retry message '12436066-b467-411a-86b7-b28c012ebe2e' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:47:651155 Z
	Handler failure time: 2025-02-22 18:22:47:680964 Z
	Handler canceled: False
	Message ID: 12436066-b467-411a-86b7-b28c012ebe2e
	Pipeline canceled: False
2025-02-22 15:22:47.702 INFO  Immediate Retry is going to retry message '5da9b342-038c-4131-b72f-b28c012ebe33' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 16
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:22:47:682158 Z
	Handler failure time: 2025-02-22 18:22:47:700537 Z
	Handler canceled: False
	Message ID: 5da9b342-038c-4131-b72f-b28c012ebe33
	Pipeline canceled: False
2025-02-22 15:26:08.707 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 15:26:09.203 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 15:26:09.219 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 15:27:24.801 INFO  Immediate Retry is going to retry message '01f5a514-6daf-4935-ba9b-b28c013003a9' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\4778d3f2-c0c9-e980-1e57-71a9ba102657.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 01f5a514-6daf-4935-ba9b-b28c013003a9
	Pipeline canceled: False
2025-02-22 15:31:09.450 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 15:31:09.691 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 15:31:09.705 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 15:33:15.844 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 15:33:22.766 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 15:33:22.771 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 15:33:26.442 INFO  Immediate Retry is going to retry message 'c9611095-12e7-4a2a-8219-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.MutateIncomingMessageBehavior.InvokeIncomingMessageMutators(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/MessageMutators/MutateInstanceMessage/MutateIncomingMessageBehavior.cs:line 62
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.MutateIncomingTransportMessageBehavior.InvokeIncomingTransportMessagesMutators(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/MessageMutators/MutateTransportMessage/MutateIncomingTransportMessageBehavior.cs:line 61
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:33:23:265146 Z
	Handler failure time: 2025-02-22 18:33:26:370045 Z
	Handler canceled: False
	Message ID: c9611095-12e7-4a2a-8219-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:33:27.564 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:33:26:483971 Z
	Handler failure time: 2025-02-22 18:33:27:556811 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:33:28.649 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:33:27:567744 Z
	Handler failure time: 2025-02-22 18:33:28:644605 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:33:33.322 INFO  Immediate Retry is going to retry message 'c9611095-12e7-4a2a-8219-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:33:29:824242 Z
	Handler failure time: 2025-02-22 18:33:33:232371 Z
	Handler canceled: False
	Message ID: c9611095-12e7-4a2a-8219-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:33:34.241 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:33:33:236245 Z
	Handler failure time: 2025-02-22 18:33:34:238639 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:33:35.109 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:33:34:250872 Z
	Handler failure time: 2025-02-22 18:33:35:106055 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:33:35.110 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\8d28a1ff-c2bd-8e23-9857-7bdd6abd336f.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:33:48.608 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:33:35:131339 Z
	Handler failure time: 2025-02-22 18:33:48:606461 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:33:48.608 INFO  Immediate Retry is going to retry message 'c9611095-12e7-4a2a-8219-b28c0131561d' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\8d28a1ff-c2bd-8e23-9857-7bdd6abd336f.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: c9611095-12e7-4a2a-8219-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:02.251 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\8d28a1ff-c2bd-8e23-9857-7bdd6abd336f.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:02.253 WARN  Delayed Retry will reschedule message '9b87111f-d2c9-4250-bbb2-b28c0131561d' after a delay of 00:00:10 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:33:48:620684 Z
	Handler failure time: 2025-02-22 18:34:02:249823 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:02.938 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:02:260984 Z
	Handler failure time: 2025-02-22 18:34:02:936150 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:03.363 INFO  Immediate Retry is going to retry message 'c9611095-12e7-4a2a-8219-b28c0131561d' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\8d28a1ff-c2bd-8e23-9857-7bdd6abd336f.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: c9611095-12e7-4a2a-8219-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:03.364 WARN  Delayed Retry will reschedule message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' after a delay of 00:00:10 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:02:946204 Z
	Handler failure time: 2025-02-22 18:34:03:357080 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:13.360 WARN  Delayed Retry will reschedule message 'c9611095-12e7-4a2a-8219-b28c0131561d' after a delay of 00:00:10 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:12:147964 Z
	Handler failure time: 2025-02-22 18:34:13:357170 Z
	Handler canceled: False
	Message ID: c9611095-12e7-4a2a-8219-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:14.309 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:13:391467 Z
	Handler failure time: 2025-02-22 18:34:14:307641 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:14.858 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:14:320198 Z
	Handler failure time: 2025-02-22 18:34:14:856066 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:14.857 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\8d28a1ff-c2bd-8e23-9857-7bdd6abd336f.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:15.245 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:14:867420 Z
	Handler failure time: 2025-02-22 18:34:15:243463 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:15.591 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:15:253505 Z
	Handler failure time: 2025-02-22 18:34:15:588880 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:15.940 INFO  Immediate Retry is going to retry message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:15:600159 Z
	Handler failure time: 2025-02-22 18:34:15:938045 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:15.940 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\8d28a1ff-c2bd-8e23-9857-7bdd6abd336f.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:16.293 WARN  Delayed Retry will reschedule message '9c62530e-a7d9-4d97-9dcb-b28c013156ab' after a delay of 00:00:20 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:15:952337 Z
	Handler failure time: 2025-02-22 18:34:16:291112 Z
	Handler canceled: False
	Message ID: 9c62530e-a7d9-4d97-9dcb-b28c013156ab
	Pipeline canceled: False
2025-02-22 15:34:16.713 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:16:368253 Z
	Handler failure time: 2025-02-22 18:34:16:711133 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:17.524 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:16:733939 Z
	Handler failure time: 2025-02-22 18:34:17:522412 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:17.864 INFO  Immediate Retry is going to retry message '9b87111f-d2c9-4250-bbb2-b28c0131561d' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:17:531193 Z
	Handler failure time: 2025-02-22 18:34:17:862652 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:18.299 WARN  Delayed Retry will reschedule message '9b87111f-d2c9-4250-bbb2-b28c0131561d' after a delay of 00:00:20 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:34:17:870280 Z
	Handler failure time: 2025-02-22 18:34:18:296944 Z
	Handler canceled: False
	Message ID: 9b87111f-d2c9-4250-bbb2-b28c0131561d
	Pipeline canceled: False
2025-02-22 15:34:18.620 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:34:18.620 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:34:20.068 INFO  Immediate Retry is going to retry message '6ac95b4a-28f5-4f2e-b5ee-b28c01320df3' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\8d28a1ff-c2bd-8e23-9857-7bdd6abd336f.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\8d28a1ff-c2bd-8e23-9857-7bdd6abd336f.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 6ac95b4a-28f5-4f2e-b5ee-b28c01320df3
	Pipeline canceled: False
2025-02-22 15:34:20.078 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 15:34:20.082 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:34:23.378 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:34:23.382 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:34:36.313 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:34:36.319 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:34:38.594 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:34:38.598 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:35:46.820 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:35:46.820 INFO  Immediate Retry is going to retry message 'fc57c7aa-46b0-4a01-af91-b28c01325183' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\17ffd7e4-f069-baf0-bf19-4bd379229d96.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: fc57c7aa-46b0-4a01-af91-b28c01325183
	Pipeline canceled: False
2025-02-22 15:35:47.357 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:35:47.357 INFO  Immediate Retry is going to retry message 'eb092a95-94b6-4984-8928-b28c013247d2' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:35:16:279149 Z
	Handler failure time: 2025-02-22 18:35:46:272476 Z
	Handler canceled: False
	Message ID: eb092a95-94b6-4984-8928-b28c013247d2
	Pipeline canceled: False
2025-02-22 15:35:46.819 INFO  Immediate Retry is going to retry message 'eeca7cf9-36aa-4a63-821b-b28c013247d2' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\17ffd7e4-f069-baf0-bf19-4bd379229d96.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: eeca7cf9-36aa-4a63-821b-b28c013247d2
	Pipeline canceled: False
2025-02-22 15:35:48.416 INFO  Immediate Retry is going to retry message 'fc57c7aa-46b0-4a01-af91-b28c01325183' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:35:47:369623 Z
	Handler failure time: 2025-02-22 18:35:48:413445 Z
	Handler canceled: False
	Message ID: fc57c7aa-46b0-4a01-af91-b28c01325183
	Pipeline canceled: False
2025-02-22 15:35:48.798 INFO  Immediate Retry is going to retry message '484c11d3-8ad5-4aec-8d13-b28c013275f1' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\17ffd7e4-f069-baf0-bf19-4bd379229d96.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 484c11d3-8ad5-4aec-8d13-b28c013275f1
	Pipeline canceled: False
2025-02-22 15:35:48.798 INFO  Immediate Retry is going to retry message '1ef92076-e72a-43a8-b702-b28c01327550' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\17ffd7e4-f069-baf0-bf19-4bd379229d96.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 1ef92076-e72a-43a8-b702-b28c01327550
	Pipeline canceled: False
2025-02-22 15:35:48.798 INFO  Immediate Retry is going to retry message 'fc57c7aa-46b0-4a01-af91-b28c01325183' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 92
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:35:48:422775 Z
	Handler failure time: 2025-02-22 18:35:48:795820 Z
	Handler canceled: False
	Message ID: fc57c7aa-46b0-4a01-af91-b28c01325183
	Pipeline canceled: False
2025-02-22 15:35:48.936 INFO  Immediate Retry is going to retry message 'eb092a95-94b6-4984-8928-b28c013247d2' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\17ffd7e4-f069-baf0-bf19-4bd379229d96.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: eb092a95-94b6-4984-8928-b28c013247d2
	Pipeline canceled: False
2025-02-22 15:35:48.938 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:35:48.936 INFO  Immediate Retry is going to retry message 'eeca7cf9-36aa-4a63-821b-b28c013247d2' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\17ffd7e4-f069-baf0-bf19-4bd379229d96.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: eeca7cf9-36aa-4a63-821b-b28c013247d2
	Pipeline canceled: False
2025-02-22 15:35:48.953 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:35:48.961 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:35:48.965 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:35:48.968 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:35:48.970 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:35:49.364 INFO  Immediate Retry is going to retry message '1ef92076-e72a-43a8-b702-b28c01327550' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\17ffd7e4-f069-baf0-bf19-4bd379229d96.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\17ffd7e4-f069-baf0-bf19-4bd379229d96.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 56
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 1ef92076-e72a-43a8-b702-b28c01327550
	Pipeline canceled: False
2025-02-22 15:35:49.377 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 15:35:49.382 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:38:30.888 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 15:38:31.032 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 15:38:31.037 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 15:39:29.664 INFO  Immediate Retry is going to retry message 'cf7be1a0-d662-418d-8674-b28c01336b9f' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:39:17:074488 Z
	Handler failure time: 2025-02-22 18:39:29:611244 Z
	Handler canceled: False
	Message ID: cf7be1a0-d662-418d-8674-b28c01336b9f
	Pipeline canceled: False
2025-02-22 15:39:38.261 INFO  Immediate Retry is going to retry message '8728ed82-76ca-4714-832c-b28c01336b9f' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:39:29:686644 Z
	Handler failure time: 2025-02-22 18:39:38:259191 Z
	Handler canceled: False
	Message ID: 8728ed82-76ca-4714-832c-b28c01336b9f
	Pipeline canceled: False
2025-02-22 15:39:39.335 INFO  Immediate Retry is going to retry message '4fe0405d-d685-4097-b235-b28c01336b9f' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:39:38:343905 Z
	Handler failure time: 2025-02-22 18:39:39:332433 Z
	Handler canceled: False
	Message ID: 4fe0405d-d685-4097-b235-b28c01336b9f
	Pipeline canceled: False
2025-02-22 15:39:41.293 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:39:44.934 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:39:44.937 INFO  Immediate Retry is going to retry message 'cf7be1a0-d662-418d-8674-b28c01336b9f' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:39:43:803541 Z
	Handler failure time: 2025-02-22 18:39:44:424437 Z
	Handler canceled: False
	Message ID: cf7be1a0-d662-418d-8674-b28c01336b9f
	Pipeline canceled: False
2025-02-22 15:39:45.453 INFO  Immediate Retry is going to retry message '8728ed82-76ca-4714-832c-b28c01336b9f' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:39:44:950545 Z
	Handler failure time: 2025-02-22 18:39:45:449763 Z
	Handler canceled: False
	Message ID: 8728ed82-76ca-4714-832c-b28c01336b9f
	Pipeline canceled: False
2025-02-22 15:39:54.514 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:39:54.524 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:39:54.720 INFO  Immediate Retry is going to retry message '4fe0405d-d685-4097-b235-b28c01336b9f' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c8a226aa-6e17-cf36-1061-e56b65dc081d.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c8a226aa-6e17-cf36-1061-e56b65dc081d.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 4fe0405d-d685-4097-b235-b28c01336b9f
	Pipeline canceled: False
2025-02-22 15:39:54.733 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:39:54.738 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:39:54.822 INFO  Immediate Retry is going to retry message '255afbc5-8f7f-4642-b5f8-b28c01338815' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c8a226aa-6e17-cf36-1061-e56b65dc081d.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c8a226aa-6e17-cf36-1061-e56b65dc081d.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 255afbc5-8f7f-4642-b5f8-b28c01338815
	Pipeline canceled: False
2025-02-22 15:39:54.831 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 15:39:54.834 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:39:54.934 INFO  Immediate Retry is going to retry message 'cf7be1a0-d662-418d-8674-b28c01336b9f' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c8a226aa-6e17-cf36-1061-e56b65dc081d.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c8a226aa-6e17-cf36-1061-e56b65dc081d.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: cf7be1a0-d662-418d-8674-b28c01336b9f
	Pipeline canceled: False
2025-02-22 15:39:54.948 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:39:54.953 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:40:45.011 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 15:40:45.106 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 15:40:45.109 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 15:41:44.297 INFO  Immediate Retry is going to retry message '62aca89b-c664-4b08-a5dd-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:41:33:957414 Z
	Handler failure time: 2025-02-22 18:41:44:256869 Z
	Handler canceled: False
	Message ID: 62aca89b-c664-4b08-a5dd-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:41:58.199 INFO  Immediate Retry is going to retry message '712d8e49-6c1f-40b3-b476-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:41:44:355957 Z
	Handler failure time: 2025-02-22 18:41:58:197267 Z
	Handler canceled: False
	Message ID: 712d8e49-6c1f-40b3-b476-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:41:58.199 INFO  Immediate Retry is going to retry message 'b947f7ce-a4b0-44d5-a136-b28c01340c17' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: b947f7ce-a4b0-44d5-a136-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:13.410 INFO  Immediate Retry is going to retry message '62aca89b-c664-4b08-a5dd-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:41:58:224914 Z
	Handler failure time: 2025-02-22 18:41:59:244390 Z
	Handler canceled: False
	Message ID: 62aca89b-c664-4b08-a5dd-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:13.410 INFO  Immediate Retry is going to retry message 'b947f7ce-a4b0-44d5-a136-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:41:59:245781 Z
	Handler failure time: 2025-02-22 18:42:13:406675 Z
	Handler canceled: False
	Message ID: b947f7ce-a4b0-44d5-a136-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:14.888 INFO  Immediate Retry is going to retry message '62aca89b-c664-4b08-a5dd-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:42:13:424235 Z
	Handler failure time: 2025-02-22 18:42:14:884850 Z
	Handler canceled: False
	Message ID: 62aca89b-c664-4b08-a5dd-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:14.887 INFO  Immediate Retry is going to retry message '712d8e49-6c1f-40b3-b476-b28c01340c17' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 712d8e49-6c1f-40b3-b476-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:16.880 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:42:16.880 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:42:16.885 INFO  Immediate Retry is going to retry message '62aca89b-c664-4b08-a5dd-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:42:15:164836 Z
	Handler failure time: 2025-02-22 18:42:16:880631 Z
	Handler canceled: False
	Message ID: 62aca89b-c664-4b08-a5dd-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:18.893 INFO  Immediate Retry is going to retry message 'b947f7ce-a4b0-44d5-a136-b28c01340c17' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: b947f7ce-a4b0-44d5-a136-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:18.894 INFO  Immediate Retry is going to retry message '62aca89b-c664-4b08-a5dd-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:42:16:896149 Z
	Handler failure time: 2025-02-22 18:42:18:887520 Z
	Handler canceled: False
	Message ID: 62aca89b-c664-4b08-a5dd-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:19.507 INFO  Immediate Retry is going to retry message '712d8e49-6c1f-40b3-b476-b28c01340c17' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 712d8e49-6c1f-40b3-b476-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:20.169 INFO  Immediate Retry is going to retry message 'ce9ed379-5b12-4640-b65e-b28c01343e67' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json' because it is being used by another process.
   at System.IO.FileSystem.DeleteFile(String fullPath)
   at NServiceBus.SagaStorageFile.Dispose() in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 25
   at NServiceBus.LearningSynchronizedStorageSession.Dispose() in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 18
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.DisposeAsync()
--- End of stack trace from previous location ---
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
2025-02-22 15:42:20.354 INFO  Immediate Retry is going to retry message 'b947f7ce-a4b0-44d5-a136-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:42:19:504701 Z
	Handler failure time: 2025-02-22 18:42:20:178474 Z
	Handler canceled: False
	Message ID: b947f7ce-a4b0-44d5-a136-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:21.084 INFO  Immediate Retry is going to retry message 'cde7cc20-5c8b-46b2-a993-b28c01343e67' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: cde7cc20-5c8b-46b2-a993-b28c01343e67
	Pipeline canceled: False
2025-02-22 15:42:21.103 INFO  Immediate Retry is going to retry message '712d8e49-6c1f-40b3-b476-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:42:20:182626 Z
	Handler failure time: 2025-02-22 18:42:20:974971 Z
	Handler canceled: False
	Message ID: 712d8e49-6c1f-40b3-b476-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:21.635 INFO  Immediate Retry is going to retry message 'b947f7ce-a4b0-44d5-a136-b28c01340c17' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 97
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:42:20:981376 Z
	Handler failure time: 2025-02-22 18:42:21:628617 Z
	Handler canceled: False
	Message ID: b947f7ce-a4b0-44d5-a136-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:21.737 WARN  Delayed Retry will reschedule message '62aca89b-c664-4b08-a5dd-b28c01340c17' after a delay of 00:00:10 because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 62aca89b-c664-4b08-a5dd-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:22.218 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:42:22.254 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:42:22.254 INFO  Immediate Retry is going to retry message 'ce9ed379-5b12-4640-b65e-b28c01343e67' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: ce9ed379-5b12-4640-b65e-b28c01343e67
	Pipeline canceled: False
2025-02-22 15:42:22.267 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 15:42:22.271 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:42:22.646 INFO  Immediate Retry is going to retry message '712d8e49-6c1f-40b3-b476-b28c01340c17' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\528fcf65-1e10-aa8c-955b-b38f541a585e.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 712d8e49-6c1f-40b3-b476-b28c01340c17
	Pipeline canceled: False
2025-02-22 15:42:22.654 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:42:22.656 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:42:32.283 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:42:32.299 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:53:03.610 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 15:53:03.772 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 15:53:03.777 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 15:53:55.229 INFO  Immediate Retry is going to retry message '5cffbaf7-6781-4090-adfa-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:53:51:308539 Z
	Handler failure time: 2025-02-22 18:53:55:179228 Z
	Handler canceled: False
	Message ID: 5cffbaf7-6781-4090-adfa-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:08.078 INFO  Immediate Retry is going to retry message 'ca53a1a3-decb-4116-9d84-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:53:55:244976 Z
	Handler failure time: 2025-02-22 18:54:08:075260 Z
	Handler canceled: False
	Message ID: ca53a1a3-decb-4116-9d84-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:08.928 INFO  Immediate Retry is going to retry message '180e54f6-bc2a-46d3-bc3f-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:08:188702 Z
	Handler failure time: 2025-02-22 18:54:08:926425 Z
	Handler canceled: False
	Message ID: 180e54f6-bc2a-46d3-bc3f-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:09.934 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:54:13.289 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 15:54:13.785 INFO  Immediate Retry is going to retry message '5cffbaf7-6781-4090-adfa-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:12:616516 Z
	Handler failure time: 2025-02-22 18:54:13:190438 Z
	Handler canceled: False
	Message ID: 5cffbaf7-6781-4090-adfa-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:13.785 INFO  Immediate Retry is going to retry message '180e54f6-bc2a-46d3-bc3f-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:13:192631 Z
	Handler failure time: 2025-02-22 18:54:13:782653 Z
	Handler canceled: False
	Message ID: 180e54f6-bc2a-46d3-bc3f-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:14.332 INFO  Immediate Retry is going to retry message '5cffbaf7-6781-4090-adfa-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:13:795404 Z
	Handler failure time: 2025-02-22 18:54:14:329663 Z
	Handler canceled: False
	Message ID: 5cffbaf7-6781-4090-adfa-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:14.900 INFO  Immediate Retry is going to retry message '5cffbaf7-6781-4090-adfa-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:14:338822 Z
	Handler failure time: 2025-02-22 18:54:14:897933 Z
	Handler canceled: False
	Message ID: 5cffbaf7-6781-4090-adfa-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:14.901 INFO  Immediate Retry is going to retry message 'ca53a1a3-decb-4116-9d84-b28c01376c20' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: ca53a1a3-decb-4116-9d84-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:15.338 INFO  Immediate Retry is going to retry message '5cffbaf7-6781-4090-adfa-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:14:911410 Z
	Handler failure time: 2025-02-22 18:54:15:330935 Z
	Handler canceled: False
	Message ID: 5cffbaf7-6781-4090-adfa-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:15.338 INFO  Immediate Retry is going to retry message '3591fe3e-282b-44f2-83a3-b28c013785f4' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 3591fe3e-282b-44f2-83a3-b28c013785f4
	Pipeline canceled: False
2025-02-22 15:54:16.578 INFO  Immediate Retry is going to retry message '180e54f6-bc2a-46d3-bc3f-b28c01376c20' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 180e54f6-bc2a-46d3-bc3f-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:16.578 INFO  Immediate Retry is going to retry message 'fd1cf56d-5504-4945-b7db-b28c01378206' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: fd1cf56d-5504-4945-b7db-b28c01378206
	Pipeline canceled: False
2025-02-22 15:54:16.579 WARN  Delayed Retry will reschedule message '5cffbaf7-6781-4090-adfa-b28c01376c20' after a delay of 00:00:10 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:15:346791 Z
	Handler failure time: 2025-02-22 18:54:16:576232 Z
	Handler canceled: False
	Message ID: 5cffbaf7-6781-4090-adfa-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:17.272 INFO  Immediate Retry is going to retry message 'ca53a1a3-decb-4116-9d84-b28c01376c20' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: ca53a1a3-decb-4116-9d84-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:17.273 INFO  Immediate Retry is going to retry message '180e54f6-bc2a-46d3-bc3f-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:16:587286 Z
	Handler failure time: 2025-02-22 18:54:17:271552 Z
	Handler canceled: False
	Message ID: 180e54f6-bc2a-46d3-bc3f-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:17.824 INFO  Immediate Retry is going to retry message 'ca53a1a3-decb-4116-9d84-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:17:282162 Z
	Handler failure time: 2025-02-22 18:54:17:822462 Z
	Handler canceled: False
	Message ID: ca53a1a3-decb-4116-9d84-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:17.824 INFO  Immediate Retry is going to retry message '3591fe3e-282b-44f2-83a3-b28c013785f4' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 3591fe3e-282b-44f2-83a3-b28c013785f4
	Pipeline canceled: False
2025-02-22 15:54:18.427 INFO  Immediate Retry is going to retry message 'ca53a1a3-decb-4116-9d84-b28c01376c20' because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:17:844223 Z
	Handler failure time: 2025-02-22 18:54:18:425680 Z
	Handler canceled: False
	Message ID: ca53a1a3-decb-4116-9d84-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:18.428 INFO  Immediate Retry is going to retry message 'fd1cf56d-5504-4945-b7db-b28c01378206' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: fd1cf56d-5504-4945-b7db-b28c01378206
	Pipeline canceled: False
2025-02-22 15:54:19.086 WARN  Delayed Retry will reschedule message 'ca53a1a3-decb-4116-9d84-b28c01376c20' after a delay of 00:00:10 because of an exception:
System.Exception: Best practice violation for message type 'Sale.Core.Domain.Saga.Commands.ProcessPaymentCommand'. Events can have multiple recipients, so they should be published.
   at NServiceBus.Validations.AssertIsValidForSend(Type messageType) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/Validations.cs:line 23
   at NServiceBus.EnforceSendBestPracticesBehavior.Invoke(IOutgoingSendContext context, Func`2 next) in /_/src/NServiceBus.Core/Routing/MessagingBestPractices/EnforceSendBestPracticesBehavior.cs:line 18
   at NServiceBus.Pipeline`1.Invoke(TContext context) in /_/src/NServiceBus.Core/Pipeline/Pipeline.cs:line 49
   at NServiceBus.TracingExtensions.Invoke[TContext](IPipeline`1 pipeline, TContext context, Activity activity) in /_/src/NServiceBus.Core/OpenTelemetry/Tracing/TracingExtensions.cs:line 12
   at NServiceBus.MessageOperations.SendMessage(IBehaviorContext context, Type messageType, Object message, SendOptions options) in /_/src/NServiceBus.Core/Unicast/MessageOperations.cs:line 137
   at Sale.Core.Domain.Saga.SaleSaga.Handle(StockConfirmedEvent message, IMessageHandlerContext context) in C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Sale\Sale.Core.Domain.Saga\Saga\SaleSaga.cs:line 105
   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in /_/src/NServiceBus.Core/Pipeline/Incoming/InvokeHandlerTerminator.cs:line 27
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 114
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message type: Sale.Core.Domain.Saga.Events.StockConfirmedEvent
	Handler type: Sale.Core.Domain.Saga.SaleSaga
	Handler start time: 2025-02-22 18:54:18:433605 Z
	Handler failure time: 2025-02-22 18:54:19:084741 Z
	Handler canceled: False
	Message ID: ca53a1a3-decb-4116-9d84-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:19.177 INFO  Immediate Retry is going to retry message '180e54f6-bc2a-46d3-bc3f-b28c01376c20' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 180e54f6-bc2a-46d3-bc3f-b28c01376c20
	Pipeline canceled: False
2025-02-22 15:54:19.701 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:54:19.704 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:54:19.811 INFO  Immediate Retry is going to retry message 'fd1cf56d-5504-4945-b7db-b28c01378206' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\c1a80d74-8c4b-cab7-f65a-3dbbc36139a4.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: fd1cf56d-5504-4945-b7db-b28c01378206
	Pipeline canceled: False
2025-02-22 15:54:19.821 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 15:54:19.824 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:54:27.301 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:54:27.308 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 15:54:29.102 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 15:54:29.106 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:00:05.105 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 16:00:05.339 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 16:00:05.347 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 16:01:54.331 INFO  Immediate Retry is going to retry message '92bd8369-a4ba-4faf-a16e-b28c013970e3' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\79beee80-0eb3-4722-8396-63ae86df3a98.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: 92bd8369-a4ba-4faf-a16e-b28c013970e3
	Pipeline canceled: False
2025-02-22 16:01:54.331 INFO  Immediate Retry is going to retry message 'b5acb130-70b5-4996-b7d2-b28c013970a6' because of an exception:
System.IO.IOException: The process cannot access the file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\79beee80-0eb3-4722-8396-63ae86df3a98.json' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: b5acb130-70b5-4996-b7d2-b28c013970a6
	Pipeline canceled: False
2025-02-22 16:02:07.550 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:02:07.564 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:02:07.565 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:02:12.092 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 16:02:12.098 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:02:12.299 INFO  Immediate Retry is going to retry message 'ece351dc-b72b-4799-965d-b28c0139b1bf' because of an exception:
System.IO.FileNotFoundException: Could not find file 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\79beee80-0eb3-4722-8396-63ae86df3a98.json'.
File name: 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\.sagas\Sale.Core.Domain.Saga.SaleSaga\79beee80-0eb3-4722-8396-63ae86df3a98.json'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.AsyncWindowsFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/SagaPersister/SagaStorageFile.cs:line 60
   at NServiceBus.SagaStorageFile.OpenWithRetryOnConcurrency(String filePath, FileMode fileAccess, CancellationToken cancellationToken)
   at NServiceBus.LearningSynchronizedStorageSession.Open(Guid sagaId, Type entityType, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 77
   at NServiceBus.LearningSynchronizedStorageSession.Read[TSagaData](Guid sagaId, SagaManifestCollection sagaManifests, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Persistence/Learning/LearningSynchronizedStorageSession.cs:line 46
   at NServiceBus.PropertySagaFinder`1.Find(IServiceProvider builder, SagaFinderDefinition finderDefinition, ISynchronizedStorageSession storageSession, ContextBag context, Object message, IReadOnlyDictionary`2 messageHeaders, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Sagas/PropertySagaFinder.cs:line 42
   at NServiceBus.SagaPersistenceBehavior.Invoke(IInvokeHandlerContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/SagaPersistenceBehavior.cs:line 77
   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/LoadHandlersConnector.cs:line 49
   at NServiceBus.InvokeSagaNotFoundBehavior.Invoke(IIncomingLogicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Sagas/InvokeSagaNotFoundBehavior.cs:line 17
   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in /_/src/NServiceBus.Core/Pipeline/Incoming/DeserializeMessageConnector.cs:line 39
   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in /_/src/NServiceBus.Core/Performance/Statistics/ProcessingStatisticsBehavior.cs:line 25
   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/Pipeline/Incoming/TransportReceiveToPhysicalMessageConnector.cs:line 36
   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in /_/src/NServiceBus.Core/ServicePlatform/Retries/RetryAcknowledgementBehavior.cs:line 25
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 50
   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in /_/src/NServiceBus.Core/Pipeline/MainPipelineExecutor.cs:line 78
   at NServiceBus.Transport.RabbitMQ.MessagePump.Process(AsyncEventingBasicConsumer consumer, BasicDeliverEventArgs message, CancellationToken messageProcessingCancellationToken) in /_/src/NServiceBus.Transport.RabbitMQ/Receiving/MessagePump.cs:line 414
Exception details:
	Message ID: ece351dc-b72b-4799-965d-b28c0139b1bf
	Pipeline canceled: False
2025-02-22 16:02:12.316 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 16:02:12.319 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:13:17.067 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 16:13:17.245 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 16:13:17.250 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 16:14:15.207 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:14:16.729 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:14:16.765 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:14:17.518 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 16:14:17.522 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:14:17.542 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 16:14:17.546 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:20:38.238 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:20:40.754 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:20:41.421 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'.
2025-02-22 16:20:41.426 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.StockConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:20:41.912 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 16:20:41.916 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:20:41.933 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:20:41.941 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 16:20:41.944 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:24:00.844 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 16:24:00.953 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 16:24:00.958 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 16:24:18.730 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:24:21.314 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:24:21.345 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:24:23.438 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 16:24:23.440 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:24:23.444 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 16:24:23.446 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:25:39.191 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:25:41.264 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:25:42.933 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:26:02.269 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 16:26:02.278 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:26:02.733 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'.
2025-02-22 16:26:06.316 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:32:01.435 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 16:32:01.570 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 16:32:01.576 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 16:32:35.917 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:32:36.023 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:32:36.058 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 16:32:36.063 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
2025-02-22 16:34:56.355 INFO  Logging to 'C:\1 Arquivos\TI\0 Dev\GitHub\Projeto 3 apis\src\backend\src\Payment\Payment.WebApi\bin\Debug\net8.0\' with level Info
2025-02-22 16:34:56.563 INFO  No valid license could be found. Falling back to trial license with start date '2025-02-13'.
2025-02-22 16:34:56.568 WARN  Trial license expiring in 5 days. Get your free development license at https://particular.net/license/nservicebus?v=9.2.6&t=0&p=windows&f=8
2025-02-22 16:35:22.890 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentConfirmedEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:35:22.981 WARN  You are using a basic message to do pub/sub. Consider implementing the more specific ICommand and IEvent interfaces on the type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent' to help NServiceBus to enforce messaging best practices for you.
2025-02-22 16:35:23.017 INFO  Could not find a started saga of 'Sale.Core.Domain.Saga.SaleSaga' for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'.
2025-02-22 16:35:23.020 INFO  Could not find any started sagas for message type 'Sale.Core.Domain.Saga.Events.PaymentFailEvent'. Going to invoke SagaNotFoundHandlers.
